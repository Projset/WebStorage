class WebStorage{constructor(e,t){if(!e)throw new Error("WebStorage : 1 argument required, 0 argument passed.");if(!window.localStorage||!window.sessionStorage)throw new Error("WebStorage : Can't create WebStorage, localStorage and sessionStorage are not available.");t=t?t.toLowerCase():"session",["local","localstorage","session","sessionstorage"].includes(t)||(t="session");var r="local"===t||"localstorage"===t?"localStorage":"sessionStorage";this.name=e,this.location=r,r=window[r],this.storage=r,this.data=this.json()}add(e,t){var r=this.json();if(e&&"object"==typeof e&&e instanceof Object)for(var s in e)this.trigger(s,r[s],e[s]),r[s]=e[s];else e&&"string"==typeof e&&void 0!==t&&(this.trigger(e,r[e],t),r[e]=t);return this.storage.setItem(this.name,JSON.stringify(r)),this.json()}debug=!1;delete(){var e=this.json();for(var t in e)this.trigger(t,e[t]),delete e[t];return this.storage.removeItem(this.name),this.data=null,this}get(e){var t=this.json();return e&&t[e]||void 0}has(e){var t=this.json();return!!e&&!!t[e]}json(){if(!this.name)throw new Error("WebStorage : 'NAME' parameter not found. Try refreshing the page or reset Constructor.");if(!this.storage)throw new Error("WebStorage : 'STORAGE' parameter not found. Try refreshing the page or reset Constructor.");if(!this.location)throw new Error("WebStorage : 'LOCATION' parameter not found. Try refreshing the page or reset Constructor.");if(!this.onchangeevents)throw new Error("WebStorage : 'ONCHANGEEVENTS' parameter not found. Try refreshing the page or reset Constructor.");var e,t=0;if(this.storage.getItem(this.name))try{e=JSON.parse(this.storage.getItem(this.name))}catch(t){e={}}else e={};for(var r in delete e.length,e.WebStorage=((Date.now?Date.now():(new Date).getTime())/1e3).toFixed(0),e)t+=1;return e.length=t,this.storage.setItem(this.name,JSON.stringify(e)),this.length=t,this.data=e,e}length=0;onchangeevents=[function(e,t,r){console.info("WebStorage/"+this.location,">",this.name,">",e,":",t,"=>",r)}];onchange(e){return Is.function(e)&&this.onchangeevents.push(e),this}remove(e){var t=this.json();return e&&"object"==typeof e&&e instanceof Array?e.forEach((e=>{e&&"string"==typeof e&&(this.trigger(e,t[e]),delete t[e])})):e&&"string"==typeof e&&e.split(" ").forEach((e=>{e&&(this.trigger(e,t[e]),delete t[e])})),this.storage.setItem(this.name,JSON.stringify(t)),this.json()}set(e,t){return this.add(e,t)}trigger(e,t,r){return this.onchangeevents.forEach(((s,o)=>{(0!==o||this.debug)&&s.call(this,e,t,r)})),this}}
